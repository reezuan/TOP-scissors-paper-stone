<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Scissors. Paper. Stone!</title>
        <link rel="stylesheet" href="./style.css">
    </head>
    <body>
        <script>
            /*
            When a user opens the page, initialise a function called game.
            Send a welcome message via browser alert & ask the user if they are ready to play.
            If the user does not agree to play, close the game.
            If the user agrees to play, initialise a counter variable to note the number of rounds played, the user's score, and the computer's score.
            While the number of rounds played is less than 5, play each round by:
                Getting the player's choice via getPlayerChoice.
                Getting the computer's choice via getComputerChoice.
                Comparing both choices & see who wins that round via playRound.
                If playRound returns "user", increment the user's score & the number of rounds played by 1.
                If playRound returns "computer", increment the computer's score & the number of rounds played by 1.
                If playRound returns "draw", do not increment anything & repeat that round.
            Once the number of rounds played is 5, stop the game & see who has won more rounds.
                If player has won more rounds, print a victory message.
                If computer has won more rounds, print a defeat message.
            
            Initialise a function called getPlayerChoice that does the following:
                Asks the user to input 'Scissors', 'Paper', or 'Stone' (case-insensitive).
                If the user inputs anything other than 'Scissors', 'Paper', or 'Stone', print an error message & ask the user to input their answer correctly.
                If the user inputs either one of the three possible answers, return their answer.

            Initialise a function called getComputerChoice that does the following:
                Initialise a variable & set its value randomly to 0, 1, or 2.
                If 0, getComputerChoice returns 'Scissors'.
                If 1, getComputerChoice returns 'Paper'.
                If 2, getComputerChoice returns 'Stone'.

            Initialise a function called playRound that does the following:
                Takes the user's answer & the value returned by getComputerChoice as inputs.
                Compare the user's input & the computer's input to see who wins that round.
                If the user wins that round, return "user".
                If the computer wins that round, return "computer".
                If there is a tie, return "draw".
            */
            
            function game() {
                if (!confirm("Do you want to play the game?")) {
                    alert("You're not playing? Aw :(");
                } else {
                    alert("Let's play! The player who wins the most out of 5 rounds wins.");

                    // Initialise counter variables for no. of rounds played, user's score, and computer's score.
                    let roundsPlayed = 0;
                    let userScore = 0;
                    let computerScore = 0;

                    while (roundsPlayed < 5 && userScore < 3 && computerScore < 3) {
                        let userChoice = getUserChoice();
                        let computerChoice = getComputerChoice();
                        let roundWinner = playRound(userChoice,computerChoice);
                        
                        if (roundWinner === "draw") {
                            alert(`You chose ${userChoice} and the computer chose ${computerChoice}. It's a draw!`);
                        } else if (roundWinner === "user") {
                            alert(`You chose ${userChoice} and the computer chose ${computerChoice}. You win!`);
                            userScore++;
                            roundsPlayed++;
                        } else {
                            alert(`You chose ${userChoice} and the computer chose ${computerChoice}. You lose D:`);
                            computerScore++;
                            roundsPlayed++;
                        }

                        alert(`You currently have ${userScore} point${userScore === 1 ? "" : "s"}. The computer has ${computerScore} point${computerScore === 1 ? "" : "s"}.`);
                    }

                    if (userScore > computerScore) {
                        alert("You have emerged... victorious. While the battle wages on, know that, for today at least, you have struck fear in the machines.");
                    } else {
                        alert("The machines have won. While the battle wages on & all hope is not lost yet, humanity has suffered a major defeat today.");
                    }
                }
            }
            
            function getUserChoice() {
                let userChoice;

                while (userChoice !== "scissors" && userChoice !== "paper" && userChoice !== "stone") {
                    userChoice = prompt("Time to make a choice! Enter either Scissors, Paper, or Stone.").toLowerCase();
                }

                return userChoice;
            }

            function getComputerChoice() {
                let computerChoice = Math.floor(Math.random() * 3);
                console.log(`Computer choice is ${computerChoice}`);

                if (computerChoice === 0) {
                    return "scissors";
                } else if (computerChoice === 1) {
                    return "paper";
                } else {
                    return "stone";
                }
            }

            function playRound(userChoice,computerChoice) {
                if (userChoice === computerChoice) {
                    return "draw";
                } else if ((userChoice === "scissors" && computerChoice === "paper") || (userChoice === "paper" && computerChoice === "stone") || (userChoice === "stone" && computerChoice === "scissors")) {
                    return "user";
                } else {
                    return "computer";
                }
            }

            game();
        </script>
    </body>
</html>